# 🎯 29CART 기능 요구사항 명세서

## 📋 개요
29CART 도메인 정의서를 바탕으로 구체적인 기능을 정의합니다.

> **전제 조건**: 브랜드(상표), 상품 데이터는 사전에 등록되어 있다고 가정합니다.

---
### 1. 상품 목록 조회
**기능**: 사용자가 상품을 조회할 수 있습니다.

**접근 권한**: 모든 사용자 (회원/비회원)

**핵심 요구사항**:
- 페이지네이션을 지원해야 합니다 (최대 20개/페이지)
- 정렬 기능을 제공해야 합니다 (최신순 필수, 가격순/좋아요순 선택)
- 상품 목록 조회 시 다음 정보가 표시되어야 합니다:
    - 상품 기본 정보 (ID, 이름, 가격, 브랜드명)
    - 대표 이미지
    - 총 좋아요 수

**Reference**:
- `POST https://front-api.29cm.co.kr/api/v4/content/46902/product-list?contentType=brand-news&groupNo=117227&sort=latest&page=1&size=33`
- `POST https://search-api.29cm.co.kr/api/v4/plp/brand`

### 2. 상품 상세 조회
**기능**: 개별 상품의 상세 정보를 제공합니다.

**접근 권한**: 모든 사용자 (회원/비회원)

**핵심 요구사항**:
- 상품의 모든 기본 정보를 제공해야 합니다
- 재고 상태를 확인할 수 있어야 합니다
- 좋아요 수를 표시해야 합니다
- 상품 상세 조회 시 다음 정보가 표시되어야 합니다:
    - 상품 기본 정보 (이름, 가격, 브랜드)
    - 상품 이미지 및 상세 설명
    - 총 좋아요 수
    - 재고 상태 (있음/없음)

**Reference**:
- `GET https://bff-api.29cm.co.kr/api/v5/product-detail/3238578`
- `GET https://bff-api.29cm.co.kr/api/v5/product-detail/additional/3199208` ← additional API (브랜드 키값 포함)

### 3. 브랜드 정보 조회
**기능**: 브랜드 정보를 제공합니다.

**접근 권한**: 모든 사용자 (회원/비회원)

**핵심 요구사항**:
- 브랜드 기본 정보를 제공해야 합니다
- 해당 브랜드의 대표 상품을 보여줘야 합니다
- 브랜드 정보 조회 시 다음 정보가 표시되어야 합니다:
    - 브랜드 기본 정보 (이름, 설명, 로고)
    - 브랜드 대표 상품 목록

**Reference**:
- `GET https://display-bff-api.29cm.co.kr/api/v1/plp/brand-home/16613/overview`

### 4. 상품 좋아요 등록
**기능**: 관심 상품에 좋아요를 표시합니다.

**접근 권한**: 로그인 회원만

**핵심 요구사항**:
- 각 상품에 한 번만 좋아요가 가능해야 합니다
- 중복 등록 시에도 오류가 발생하지 않아야 합니다 (멱등성)

**예외 처리**:
- 비로그인 사용자 접근 → 401 UNAUTHORIZED

**Reference**:
- `POST https://heart-api.29cm.co.kr/api/v4/hearts/my-heart/products/3238578/set`

### 5. 상품 좋아요 취소
**기능**: 상품의 좋아요를 해제합니다.

**접근 권한**: 로그인 회원만

**핵심 요구사항**:
- 존재하지 않는 좋아요를 취소해도 오류가 발생하지 않아야 합니다 (멱등성)

**예외 처리**:
- 비로그인 사용자 접근 → 401 UNAUTHORIZED
- 접근 권한이 없는 경우 → 403 FORBIDDEN

**Reference**:
- `POST https://heart-api.29cm.co.kr/api/v4/hearts/my-heart/products/3238578/unset`

### 6. 내가 좋아요 한 상품 목록 조회
**기능**: 개인이 좋아요 표시한 상품 목록을 조회합니다.

**접근 권한**: 로그인 회원만 (본인만)

**핵심 요구사항**:
- 본인이 좋아요한 상품 목록을 확인할 수 있어야 합니다
- 페이지네이션을 지원해야 합니다 (20개/페이지)
- 최신 좋아요 순으로 정렬되어야 합니다
- 좋아요 목록 조회 시 다음 정보가 표시되어야 합니다:
    - 좋아요한 상품 목록 (상품 기본 정보 포함)
    - 좋아요 등록 일시

**예외 처리**:
- 비로그인 사용자 접근 → 401 UNAUTHORIZED
- 다른 사용자 정보 접근 → 403 FORBIDDEN

**Reference**:
- `GET https://heart-api.29cm.co.kr/api/v4/hearts/my-heart/products?page=0&size=20`

### 7. 주문 생성
**기능**: 선택한 상품을 주문합니다.

**접근 권한**: 로그인 회원만

**핵심 요구사항**:
- 여러 상품을 한 번에 주문할 수 있어야 합니다
- 각 상품별로 수량을 지정할 수 있어야 합니다
- 주문 전에 상품 재고를 확인해야 합니다
- 재고가 부족한 경우 주문이 불가능해야 합니다
- 포인트 결제로 주문을 처리해야 합니다

**주문 처리 과정**:
- 상품 재고 확인 및 차감
- 사용자 포인트 확인 및 차감
- 주문 정보를 외부 시스템에 전송 (Mock 처리 가능)

**예외 처리**:
- 비로그인 사용자 접근 → 401 UNAUTHORIZED
- 재고 부족 → 400 BAD REQUEST
- 포인트 부족 → 400 BAD REQUEST

### 8. 주문 목록 조회
**기능**: 개인 주문 내역을 조회합니다.

**접근 권한**: 로그인 회원만 (본인만)

**핵심 요구사항**:
- 본인의 모든 주문 내역을 확인할 수 있어야 합니다
- 페이지네이션을 지원해야 합니다 (20개/페이지)
- 최신 주문 순으로 정렬되어야 합니다
- 주문 목록 조회 시 다음 정보가 표시되어야 합니다:
    - 주문 번호, 주문 일시, 주문 상태
    - 주문 상품 요약 정보 (상품명, 수량)
    - 총 주문 금액

**예외 처리**:
- 비로그인 사용자 접근 → 401 UNAUTHORIZED
- 다른 사용자 정보 접근 → 403 FORBIDDEN

### 9. 주문 상세 조회
**기능**: 특정 주문의 상세 정보를 조회합니다.

**접근 권한**: 로그인 회원만 (본인 주문만)

**핵심 요구사항**:
- 특정 주문의 모든 상세 정보를 확인할 수 있어야 합니다
- 주문한 모든 상품의 정보를 제공해야 합니다
- 주문 상태와 총 금액을 명확히 표시해야 합니다
- 주문 상세 조회 시 다음 정보가 표시되어야 합니다:
    - 주문 상품 상세 정보 (상품명, 수량, 개별 가격)
    - 주문 상태 및 총 금액
    - 주문 일시

**예외 처리**:
- 비로그인 사용자 접근 → 401 UNAUTHORIZED
- 다른 사용자의 주문 접근 → 403 FORBIDDEN
- 존재하지 않는 주문 → 404 NOT FOUND

---
## 🔍 추가 기능 (향후 확장)

### 🛒 장바구니 관리
**기능**: 구매 전 상품을 임시 저장하고 관리합니다.
- 장바구니 상품 추가/제거/수량 변경
- 선택 상품 일괄 주문
- 비로그인 임시 장바구니 (브라우저 저장)

### 🔍 상품 검색 & 필터링
**기능**: 다양한 조건으로 상품을 검색합니다.
- 검색어 기반 상품 검색
- 카테고리별 필터링
- 가격 범위 설정
- Facet-group 필터링

**Reference**:
- `POST https://search-api.29cm.co.kr/api/v5/plp/facet-group`

### 📝 리뷰 관리
**기능**: 구매 상품에 대한 리뷰를 작성하고 관리합니다.
- 리뷰 작성/수정/삭제 (구매 고객만)
- 리뷰 추천/비추천
- 포토 리뷰 업로드

**Reference**:
- `GET https://review-api.29cm.co.kr/api/v4/reviews?itemId=3199208&page=0&size=20&sort=best`

### ❓ Q&A 관리
**기능**: 상품에 대한 질문과 답변을 관리합니다.
- 상품 문의 작성 (모든 사용자)
- 판매자/관리자 답변
- 비공개 문의 기능

**Reference**:
- `GET https://apihub.29cm.co.kr/item-qna/front/?item_no=3199208&offset=0&limit=10`

### 👤 사용자 인증
**기능**: 회원가입, 로그인, 프로필 관리를 제공합니다.
- 회원가입/로그인 (이메일, 소셜 로그인)
- 프로필 정보 관리
- 비밀번호 변경/찾기

### 🎨 상품 옵션 관리
**기능**: 상품의 다양한 옵션을 관리합니다.
- 사이즈, 색상 등 옵션 선택
- 옵션별 재고 관리
- 옵션별 추가 금액

### 💳 고급 결제 시스템
**기능**: 다양한 결제 방법을 지원합니다.
- 포트원 결제 연동
- 배송지 정보 관리
- 결제 상태 추적

---

## 📊 비기능적 요구사항

### 성능
- API 응답 시간: 평균 200ms 이하
- 동시 사용자: 1,000명 이상 지원
- 페이지 로딩: 3초 이하

### 보안
- HTTPS 통신 필수
- JWT 기반 인증
- 개인정보 암호화 저장

### 확장성
- MSA 아키텍처 적용
- 수평 확장 가능한 구조
- 캐싱 전략 (Redis)

### 가용성
- 99.9% 서비스 가용성
- 무중단 배포 지원
- 장애 복구 시간: 5분 이내